<!doctype html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<meta charset="utf-8">

<script>window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));</script>


<!--the following script get the JSON data from my JSON file of many quotees, and then it will allow one to tweet the randomly chosen quote after clicking on the button. I also randomly change the background color every time.-->
<script>
  $(document).ready(function() {
     $("#getMessage").on("click", function() {
       //now use the file I made for the quote data
       $.getJSON("almostdone12.json", function(json) {
          var yourHTML = "";
          //var all = JSON.stringify(json);

          //now generate a random number from 0 to the length of the array -1
          yourRandomNumber = Math.floor(Math.random() * (json.length))

          //the following code works but now I don't want to generate all the quotes just 1 random one
          //json.forEach(function (val) {
            //yourHTML += "<div class = 'quote'>";
            //yourHTML += "<p><b>The quote is: </b>" + val.theQuote;
            //yourHTML += "</p>";
           //});
          //$(".message").html(yourHTML);
          
          //change the content of the message box with jquery with the randomly chosen quote and its author
          $(".message").html("<p><br><strong>" + json[yourRandomNumber]["theQuote"] + "</strong>" + "  -  " + json[yourRandomNumber]["authorOFQuote"] + "<br></p>");


          //a twitter tweet's url will be in the form https://twitter.com/intent/tweet?text= and you need to add the content after the =. Remember that spaces don't work well in html, so we need to use %20
          yourQuoteToMakeURL = json[yourRandomNumber]["theQuote"];
          noSpacesContent = yourQuoteToMakeURL.replace(/ /g, "%20");
          yourAuthorToMakeURL = json[yourRandomNumber]["authorOFQuote"];
          noSpacesContent2 = yourAuthorToMakeURL.replace(/ /g, "%20");
          //below I had to insert &#35; for # because # has problem with html. This is for the hashtag
          noSpacesContent3 = "%20%20&#35;goodquotes";

          $(".message").append("<br><a id='quoteID' class='twitter-share-button'"+ " href='https://twitter.com/intent/tweet?text="+noSpacesContent+"%20%20"+"-"+"%20%20"+noSpacesContent2+noSpacesContent3+"'>"+"</a>");

          //now set up randomly choosing background color
          arrayOfColors = ["IndianRed","LightBlue","Tan","SlateGray","Tomato","powderblue","Peru","Turquoise"];
          yourRandomColorNumber = Math.floor(Math.random() * (arrayOfColors.length));
          $("body").css("background-color", arrayOfColors[yourRandomColorNumber]);


          //twttr.widgets.load(document.getElementById("container"));
          //reload content as recommended by https://dev.twitter.com/web/javascript/initialization
          //I figured out I needed to to this otherwise the twitter quote won't change.
          twttr.widgets.load(document.getElementById("quoteID"));

          //change content of blue button after first time
          $("#getMessage").text("Get a new randomly chosen quote.");
       });
     });
  });
</script>
</head>


<div class="container-fluid">
  <div class = "row text-center">
    <h2>Random quote generator</h2>
  </div>
  <div class = "row text-center">
    <div class = "col-xs-12 well message">
      The randomly generated quote will go here
    </div>
  </div>
  <div class = "row text-center">
    <div class = "col-xs-12">
      <button id = "getMessage" class = "btn btn-primary">
        Get Message
      </button>
    </div>
  </div>
</div>

</html>




































